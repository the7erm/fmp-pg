<html>
<head>
    <title>fmp - {{ playing.basename }}</title>
    {% include "head.html"  ignore missing %}
</head>
<body>
    {% include "search-form.html" ignore missing %}
    {% include "rating-tpl.html" ignore missing %}

    <script type="text/html" id="tpl-search">
        <div class="ui-input-search ui-btn-corner-all ui-btn-shadow ui-icon-searchfield ui-body-c">
            <%- text %>
        </div>
    </script>
    <div id="player-control"></div>
    <div id="file-box"></div>
    <input type="range" name="volume-slider" data-theme="d" data-highlight="true" id="volume-slider" value="60" min="0" max="100" step="1" />

    <input type="range" name="seek-slider" data-theme="d" data-highlight="true" id="seek-slider" value="0" min="0" max="100" step="1000000000" />
    

    <script type="text/javascript">
        $(document).ready(function(){
            
            var playerData = {
                    "player": {{ player.to_dict()|tojson|safe }}, 
                    "playing": {{ playing.to_full_dict()|tojson|safe }},
                    "volume": {{ volume|tojson|safe }},
                    "extended": {{ extended|tojson|safe }}
                };
            var testModel = new TestModel(playerData);
            var conductor = new ConductorModel(playerData);
            
            var fileview = new PlayingFileView({
                    "el": "#file-box",
                    "conductor": conductor
                }).render();
            $("#check").hide(); 
            var volumeView = new SliderView({
                "el": "#volume-slider",
                "model": conductor.volume
            }).render();
            var posView = new TimeSlider({
                "el": "#seek-slider",
                "model": conductor.pos
            }).render(); 
            var controlView = new ControlView({
                "el": "#player-control",
                "conductor": conductor
            }).render();
        });
    </script>
</body>
</html>
