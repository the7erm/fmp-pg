
<script type="text/html" id="tpl-ratings-table">
    <table class="ratings-table bordered" cellspacing="0">
        <thead class="ui-slider-bg ui-btn-active ui-btn-corner-all">
            <tr>
                <th>User</th>
                <th>Rating</th>
                <th>True Score</th>
            </tr>
        </thead>
    </table>
</script>

<script type="text/html" id="tpl-rating">
    <tr class="user-line" data-uid="<%= uid %>" data-fid="<%= fid %>" id="usid-<%- usid %>">
        <td><%= uname %></td> 
        <td class="star-rating nowrap" data-usid="<%= usid %>" data-fid="<%= fid %>" data-rating="<%- rating == 6 ? 0 : rating %>" data-uid="<%= uid %>" data-sha512="<%= sha512 %>"></td>
        <td class="true_score_td"><span class="true_score"><% print (true_score.toFixed(1)); %></span>
              <div class='rate-me<%= rating == 6 ? "" : " hidden" %>'>RATE ME</div></td>
    </tr>
</script>


<script type="text/html" id="tpl-item">
    <div class="float-left"><%- label %></div>
    <div class="float-left item-text"><%
        if (typeof href != 'undefined') {
            %><a href="<%= href %>" onclick="document.location.href=this.href;"><%
        }
    %><%- text %><%
        if (typeof href != 'undefined') {
            %></a><%
        }
    %></div><br clear="left">
</script>

<script type="text/html" id="tpl-file-info">
    <%
        var itemTemplate = _.template($("#tpl-item").html()),
            albums = model.get('albums') || [],
            artists = model.get('artists') || [],
            genres = model.get('genres') || [],
            artist_title = model.getArtistTitle();
        %><a name="fid-<%- model.get('fid') %>">fid-<%- model.get('fid') %></a><br><%
        print(itemTemplate({"label": 'Folder:', 'text': model.get('dirname')}));
        print(itemTemplate({"label": 'Filename:', 'text': model.get('basename')}));
        if (artists) {
            var renderedArtists = [];
            _.each(artists, function(a){
                if (!_.contains(renderedArtists, a['artist'])) {
                    renderedArtists.push(a['artist']);
                    print(itemTemplate({"label": 'Artist:', 
                                        "text": a['artist'] }));
                }
            });
        }
        print(itemTemplate({"label": 'Title:', "text": model.get('title')}));
        
        if (albums) {
            var last_album = "";
            _.each(albums, function(al){
                if (last_album != al['album_name']) {
                    print(itemTemplate({"label": 'Album:', 
                                     "text": al['album_name']}));
                    last_album = al['album_name'];
                }
            });
        }
        if (genres) {
            var renderedGenres = [];
            _.each(genres, function(g){
                if (!_.contains(renderedGenres, g['artist'])) {
                    print(itemTemplate({"label": 'Genre:', 
                                         "text": g['genre']}));
                    renderedGenres.push(g['genre']);
                }
            });
        }

        if(typeof dups != 'undefined' && dups.length > 0) {
            _.each(dups, function(d) {
                
                print(itemTemplate({
                    "label": 'Dup:', 
                    "text": d['fid'], 
                    "href": "/search/?q="+d['sha512']
                }));
            });
        }
    %>
</script>

<script type="text/html" id="tpl-row">
    <% var isCued = typeof(cued) != 'undefined' && cued; %>
    <div class="file<% if (isCued) { %> cued<% } %>">
        <div class="float-right add-to-preload-div">
            <button class="add-to-preload" data-iconpos="notext" data-inline="true" data-icon="<% 
            if (isCued) { 
                %>minus<% 
            } else { 
                %>plus<% 
            } %>"></button>
        </div>
        <div class="float-left loading_data_for"><%
            if (typeof(artist) != 'undefined') {
                %><%- artist %><%
            }
        %> - <%
            if (typeof(title) != 'undefined') {
                %><%- title %><%
            }
        %></div>
        <div class="float-left file-info" style=""></div>
        <img class="float-right album-art" src="/static/images/ajax-loader.gif">
        <div class="float-right ratings-table-div"></div>
        <br clear="all">
    </div>
</script>

<script type="text/html" id="tpl-mini-playing">
    <div class="float-left file-info" style="padding-left:3px; word-wrap:break-word;"></div>
    <div id="time-status" class="float-right">-<span class='left_str'></span> <span class='pos_str'></span>/<span class='dur_str'></span>
    </div>
    <br clear="both">
    <div id="player-control" class="nowrap float-left"></div>
    
    <div class="float-right ratings-table-div"></div><br clear="right">
    <img class="float-right album-art" src="">
    <br clear="left">
    
    <br clear="all">
</script>

<script type="text/html" id="tpl-mini-file-info"><%= model.getArtistTitleLink() %></script>



<script type="text/html" id="tpl-media-control">
    <% if (isNav) {
        %><li><%
    } %>
    <a class='action-link' href="/player/prev" data-cmd="prev"><img src="/static/images/media-seek-backward.png" data-cmd="prev"></a>
    <% if (isNav) {
        %></li><li><%
    } %>
    {% if playingState == "PLAYING" %}
        <a class='action-link' href="/player/pause" data-cmd="pause"><img id="play-pause-img" src="/static/images/media-playback-pause.png" data-cmd="pause"></a>
    {% else %}
        <a class='action-link' href="/player/pause" data-cmd="pause"><img id="play-pause-img" src="/static/images/media-playback-start.png" data-cmd="pause"></a>
    {% endif %}
     <% if (isNav) {
        %></li><li><%
    } %>
    <a class='action-link' href="/player/next" data-cmd="next"><img src="/static/images/media-seek-forward.png" data-cmd="next"></a>
     <% if (isNav) {
        %></li><%
    } %>
</script>


<script type="text/html" id="tpl-search">
    <div class="ui-input-search ui-btn-corner-all ui-btn-shadow ui-icon-searchfield ui-body-c">
        <%- text %>
    </div>
</script>
    
