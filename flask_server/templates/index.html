<html>
<head>
    <title>fmp - {{ playing.get_artist_title() }}</title>
    {% include "head.html"  ignore missing %}
</head>
<body>{% include "search-form.html" ignore missing %}</div> 

    <div id="file-box"></div>
    
    <input type="range" name="volume-slider" data-theme="d" data-highlight="true" id="volume-slider" value="60" min="0" max="100" step="1" />

    <div id="vol-buttons" class="float-right">
        <button class="vol-down" data-inline="true" data-theme="d" data-mini="true">-</button>
        <button class="vol-up" data-inline="true" data-theme="d" data-mini="true">+</button>
    </div>
    <br clear="both">

    <input type="range" name="seek-slider" data-theme="d" data-highlight="true" id="seek-slider" value="0" min="0" max="100" step="1000000000" />

    <div id="seek-buttons" class="float-right">
        <button class="seek-back" data-inline="true" data-theme="d" data-mini="true">&#171;</button>
        <button class="seek-forward" data-inline="true" data-theme="d" data-mini="true">&#187;</button>
    </div>
    <br clear="both">

    <!--
    <pre id="debugs">
        <h1>Conductor Playing Model</h1>
        <ul id="conductorPlayingModelDebug"></ul>
    </pre>
    -->

    <script type="text/javascript">
        $(document).bind('pageinit', function(){
            var playerData = {
                    "player": {{ player.to_dict()|tojson|safe }}, 
                    "playing": {{ playing.to_full_dict()|tojson|safe }},
                    "volume": {{ volume|tojson|safe }},
                    "extended": {{ extended|tojson|safe }}
                };
            try {
                var testModel = new TestModel(playerData);
            } catch(e) {
                alert("TestModel"+e);
                return;
            }
            try {
                var conductor = new ConductorModel(playerData);
            } catch(e) {
                alert("Conductor error:"+e);
                return;
            }
            var fileview = new PlayingFileView({
                    "el": "#file-box",
                    "conductor": conductor
                }).render();
            var volumeView = new SliderView({
                "el": "#volume-slider",
                "model": conductor.volume
            }).render();
            var posView = new TimeSlider({
                "el": "#seek-slider",
                "model": conductor.pos
            }).render();
            var controlView = new ControlView({
                "el": "#player-control",
                "conductor": conductor
            }).render();
            var timeStatusView = new TimeStatusView({
                "el": "#time-status",
                "conductor": conductor
            }).render();
            var volumeButtonView = new VolumeButtonView({
                "el": "#vol-buttons",
                "model": conductor.volume
            });
            var seekButtonView = new SeekButtonView({
                "el": "#seek-buttons",
                "model": conductor.pos
            });
            /*
            var conductorDebugView = new ModelDebugView({
                "el": "#conductorPlayingModelDebug",
                "model": conductor.playing
            }).render(); */
        });
    </script>

    <pre id="logger"></pre>
    {% include "js-templates.html" ignore missing %}
</body>
</html>
