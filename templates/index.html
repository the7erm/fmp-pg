<!DOCTYPE html>
<html ng-app="fmpApp">
    <head>
        <link rel="icon" 
              type="image/svg+xml" 
              href="/static/fmp-logo.svg">
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
        
        <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        
        <script src="/static/js/angular.min.js"></script>
        <script src="/static/js/angular-websocket.js"></script>
        <script src="/static/js/ui-bootstrap-tpls-0.13.4.min.js"></script>
        
        <script src="/static/js/fmp.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $("#next").on('click', function(e) {
                    e.preventDefault();
                    $.get("/next/");
                });

                $(".play-pause").on('click', function(e) {
                    e.preventDefault();
                    $.get("/pause/");
                    console.log("pause");
                });

                $("#prev").on('click', function(e) {
                    console.log("clicked");
                    e.preventDefault();
                    $.get("/prev/");
                });
                
            });
        </script>
        <style>
            #conneted {
                bottom:0px;
                position: absolute;
            }
            #time-status {
                float:right;
            }
            .yellow-star  {
                background-image: url("/static/star.hover.png");
                background-size: 20px 20px;
                background-repeat: no-repeat;
                min-height: 20px;
                min-width: 20px;
            }
            .red-no  {
                background-image: url("/static/no.star.png");
                background-size: 20px 20px;
                background-repeat: no-repeat;
                min-height: 20px;
                min-width: 20px;
            }
            .grey-no  {
                background-image: url("/static/no.star.grey.png");
                background-size: 20px 20px;
                background-repeat: no-repeat;
                min-height: 20px;
                min-width: 20px;
            }
            .grey-star  {
                background-image: url("/static/star.grey.png");
                background-size: 20px 20px;
                background-repeat: no-repeat;
                min-height: 20px;
                min-width: 20px;
            }
            .question-mark-on {
                background-image: url("/static/question.mark.svg");
                background-size: 20px 20px;
                background-repeat: no-repeat;
                min-height: 20px;
                min-width: 20px;
            }
            .question-mark-off {
                background-image: url("/static/question.mark.grey.svg");
                background-size: 20px 20px;
                background-repeat: no-repeat;
                min-height: 20px;
                min-width: 20px;
            }
        </style>
    </head>
    <body>
        <section ng-controller="PlayerController">
            <span id="time-status">{{PlayerData.collection.time_status}}</span>
            <div>{{PlayerData.collection.artist_title}}</div>
            <div>{{ PlayerData.collection.reason }}</div>
            <button class="btn btn-default" id="prev">Prev</button>
            <button class="btn btn-default play-pause">{{ PlayerData.collection.play_pause }}</button>
            <button class="btn btn-default" id="next">Next</button>
           
            <table class="table">
                <tr>
                    <td>User</td>
                    <td>Rating</td>
                    <td>Score</td>
                </tr>
                <tr ng-repeat="(key, data) in PlayerData.collection.ratings">
                    <td>{{data.uname}}</td>
                    <td>
                        <div ng-controller="RatingDemoCtrl">
                            <rating ng-model="data.rating" min="0" max="6" readonly="isReadonly" on-hover="hoveringOver(value)" on-leave="overStar = null" rating-states="ratingStates" ng-click="setRating()" titles="['0','1','2', '3', '4', '5', '6']"></rating>
                        </div>

                    </td>
                    <td>{{data.true_score}}</td>
                </tr>
            </table>
            <div id="conneted"></div>
            <ul>
              <li ng-repeat="(key, data) in PlayerData.collection track by key">
                {{key}}:{{ data }}
              </li>
            </ul>
          </section>
    </body>
</html>